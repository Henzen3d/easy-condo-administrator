import{c as xe,r as u,z as he,a7 as pe,a8 as ge,j as e,a9 as je,aa as k,a as p,S as fe,I as h,D as ve,b as Ne,E as ye,d as be,e as z,T as Ce,C as L,J as x}from"./index-PF3D36V0.js";import{T as Se,a as we,b as q,c as T,d as Te,e as D,P as De}from"./table-Pv-7lEPL.js";import{D as V,a as P,b as R,c as M,d as $,S as g,e as j,f,g as v,h as o,i as H}from"./select-BUw1FKH9.js";import{T as Ae,a as Fe,b as I,L as i}from"./tabs-DTHgOjkY.js";import{B as A}from"./badge-CKIFn1J9.js";import{F as Ie}from"./filter-C6oRDaef.js";import{D as K}from"./download-Cr82A7Gw.js";import{C as Oe}from"./circle-plus-B-ZudBTP.js";import{E as Be}from"./eye-CcKAEFEB.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ke=c=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c),W=c=>{const w=new Date(c);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(w)},ze=c=>{const w={"Taxa Condominial":"bg-emerald-100 text-emerald-800",Manutenção:"bg-amber-100 text-amber-800",Água:"bg-blue-100 text-blue-800",Energia:"bg-yellow-100 text-yellow-800",Segurança:"bg-purple-100 text-purple-800",Limpeza:"bg-green-100 text-green-800",Transferência:"bg-indigo-100 text-indigo-800",Outros:"bg-gray-100 text-gray-800"};return w[c]||w.Outros},ee=c=>c==="completed"?e.jsx(A,{variant:"outline",className:"border-emerald-500 bg-emerald-50 text-emerald-600",children:"Concluída"}):c==="pending"?e.jsx(A,{variant:"outline",className:"border-amber-500 bg-amber-50 text-amber-600",children:"Pendente"}):e.jsx(A,{variant:"outline",className:"border-red-500 bg-red-50 text-red-600",children:"Cancelada"});function qe(){const[c,w]=u.useState("all"),[U,J]=u.useState(""),[ae,F]=u.useState(!1),[se,O]=u.useState(!1),[ne,B]=u.useState(!1),[_,Le]=u.useState("all"),[Ve,te]=u.useState(!1);u.useState(null);const{bankAccounts:N,transactions:re,addTransaction:E,getBankAccountById:Q,confirmPayment:Pe,deleteTransaction:Re,reloadData:Me,isLoading:$e}=he(),G=pe()[0];ge(),u.useEffect(()=>{const a=G.get("account");if(a){const r=Q(a);r&&J(r.name)}},[G,Q]);const[s,b]=u.useState({description:"",amount:"",category:"none",account:"none",date:new Date().toISOString().split("T")[0],unit:"none",status:"completed"}),[n,C]=u.useState({description:"",amount:"",category:"none",account:"none",date:new Date().toISOString().split("T")[0],payee:"",status:"completed"}),[t,S]=u.useState({description:"",amount:"",fromAccount:"none",toAccount:"none",date:new Date().toISOString().split("T")[0],status:"completed"}),X=[{id:"taxa",name:"Taxa Condominial"},{id:"multa",name:"Multa"},{id:"aluguel",name:"Aluguel de Espaço"},{id:"juros",name:"Juros"},{id:"outros",name:"Outros"}],Y=[{id:"manutencao",name:"Manutenção"},{id:"agua",name:"Água"},{id:"energia",name:"Energia"},{id:"seguranca",name:"Segurança"},{id:"limpeza",name:"Limpeza"},{id:"salarios",name:"Salários"},{id:"impostos",name:"Impostos"},{id:"outros",name:"Outros"}],ie=[{id:"101",name:"101 - Bloco A"},{id:"102",name:"102 - Bloco A"},{id:"201",name:"201 - Bloco A"},{id:"202",name:"202 - Bloco A"},{id:"101b",name:"101 - Bloco B"},{id:"102b",name:"102 - Bloco B"}],ce=async()=>{var y;if(!s.description||!s.amount||s.category==="none"||s.account==="none"){x.error("Preencha todos os campos obrigatórios");return}const a=parseFloat(s.amount),r=N.find(d=>d.id===s.account);if(!r){x.error("Conta bancária não encontrada");return}const l=s.date?new Date(s.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],m={description:s.description,amount:a,type:"income",category:((y=X.find(d=>d.id===s.category))==null?void 0:y.name)||s.category,account:r.id.toString(),date:l,unit:s.unit==="none"?"":s.unit,status:s.status,payee:""};await E(m),F(!1),b({description:"",amount:"",category:"none",account:"none",date:new Date().toISOString().split("T")[0],unit:"none",status:"completed"}),x.success("Receita adicionada com sucesso")},oe=async()=>{var y;if(!n.description||!n.amount||n.category==="none"||n.account==="none"){x.error("Preencha todos os campos obrigatórios");return}const a=parseFloat(n.amount),r=N.find(d=>d.id===n.account);if(!r){x.error("Conta bancária não encontrada");return}if(n.status==="completed"&&r.balance<a){x.error("Saldo insuficiente para realizar esta despesa. Considere marcar como pendente.");return}const l=n.date?new Date(n.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],m={description:n.description,amount:a,type:"expense",category:((y=Y.find(d=>d.id===n.category))==null?void 0:y.name)||n.category,account:r.id.toString(),date:l,payee:n.payee||"",status:n.status,unit:""};await E(m),O(!1),C({description:"",amount:"",category:"none",account:"none",date:new Date().toISOString().split("T")[0],payee:"",status:"completed"}),x.success("Despesa adicionada com sucesso")},le=async()=>{if(!t.amount||t.fromAccount==="none"||t.toAccount==="none"){x.error("Preencha todos os campos obrigatórios");return}if(t.fromAccount===t.toAccount){x.error("As contas de origem e destino devem ser diferentes");return}const a=parseFloat(t.amount),r=N.find(d=>d.id===t.fromAccount),l=N.find(d=>d.id===t.toAccount);if(!r||!l){x.error("Conta bancária não encontrada");return}if(t.status==="completed"&&r.balance<a){x.error("Saldo insuficiente para realizar esta transferência. Considere marcar como pendente.");return}const m=t.date?new Date(t.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],y={description:t.description||`Transferência de ${r.name} para ${l.name}`,amount:a,type:"transfer",category:"Transferência",account:r.id.toString(),to_account:l.id.toString(),date:m,status:t.status,payee:l.name,unit:""};await E(y),B(!1),S({description:"",amount:"",fromAccount:"none",toAccount:"none",date:new Date().toISOString().split("T")[0],status:"completed"}),x.success(`Transferência de ${r.name} para ${l.name} adicionada com sucesso`)},Z=a=>{const r=N.find(l=>l.id.toString()===a);return r?r.name:a},de=re.filter(a=>{const r=c==="all"||c==="income"&&a.type==="income"||c==="expense"&&a.type==="expense"||c==="transfer"&&a.type==="transfer"||c==="pending"&&a.status==="pending",l=_==="all"||a.status===_,m=U.toLowerCase(),y=Z(a.account).toLowerCase(),d=a.to_account?Z(a.to_account).toLowerCase():"",ue=a.description.toLowerCase().includes(m)||a.category.toLowerCase().includes(m)||y.includes(m)||d.includes(m)||a.unit&&a.unit.toLowerCase().includes(m)||a.payee&&a.payee.toLowerCase().includes(m);return r&&l&&ue}),me=()=>{F(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight animate-slide-in-top",children:"Transações"}),e.jsx("p",{className:"text-muted-foreground animate-slide-in-top animation-delay-100",children:"Gerencie as receitas e despesas do condomínio"})]}),e.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(Ae,{value:c,className:"w-full sm:w-auto",onValueChange:w,children:e.jsxs(Fe,{className:"grid w-full grid-cols-4 sm:w-auto",children:[e.jsx(I,{value:"all",children:"Todas"}),e.jsxs(I,{value:"income",className:"flex items-center gap-1",children:[e.jsx(je,{size:14,className:"hidden sm:inline-block"}),e.jsx("span",{children:"Receitas"})]}),e.jsxs(I,{value:"expense",className:"flex items-center gap-1",children:[e.jsx(k,{size:14,className:"hidden sm:inline-block"}),e.jsx("span",{children:"Despesas"})]}),e.jsxs(I,{value:"transfer",className:"flex items-center gap-1",children:[e.jsx(k,{size:14,className:"hidden sm:inline-block rotate-90"}),e.jsx("span",{children:"Transf."})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",className:"flex-1 sm:flex-none",onClick:()=>te(!0),children:[e.jsx(Ie,{size:16,className:"mr-2"}),"Filtrar"]}),e.jsxs(p,{variant:"outline",size:"sm",className:"flex-1 sm:flex-none",children:[e.jsx(K,{size:16,className:"mr-2"}),"Exportar"]}),e.jsxs(p,{size:"sm",className:"flex-1 sm:flex-none",onClick:me,children:[e.jsx(Oe,{size:16,className:"mr-2"}),"Nova"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(h,{placeholder:"Buscar transação...",className:"pl-10",value:U,onChange:a=>J(a.target.value)})]}),e.jsx("div",{className:"rounded-lg border",children:e.jsxs(Se,{children:[e.jsx(we,{children:e.jsxs(q,{children:[e.jsx(T,{children:"Descrição"}),e.jsx(T,{className:"hidden md:table-cell",children:"Data"}),e.jsx(T,{className:"hidden sm:table-cell",children:"Categoria"}),e.jsx(T,{children:"Valor"}),e.jsx(T,{className:"hidden lg:table-cell",children:"Status"}),e.jsx(T,{className:"w-[50px]"})]})}),e.jsx(Te,{children:de.map(a=>e.jsxs(q,{children:[e.jsx(D,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:a.description}),e.jsxs("div",{className:"flex flex-col gap-1 sm:hidden",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:W(a.date)}),e.jsx(A,{variant:"outline",className:"w-fit",children:a.category}),e.jsx("span",{className:"text-sm",children:ee(a.status)})]})]})}),e.jsx(D,{className:"hidden md:table-cell",children:W(a.date)}),e.jsx(D,{className:"hidden sm:table-cell",children:e.jsx(A,{variant:"outline",className:ze(a.category),children:a.category})}),e.jsx(D,{children:e.jsx("span",{className:`font-medium ${a.type==="income"?"text-emerald-600":a.type==="expense"?"text-red-600":"text-indigo-600"}`,children:ke(a.amount)})}),e.jsx(D,{className:"hidden lg:table-cell",children:ee(a.status)}),e.jsx(D,{children:e.jsxs(ve,{children:[e.jsx(Ne,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",children:e.jsx(ye,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",children:[e.jsxs(z,{children:[e.jsx(Be,{className:"mr-2 h-4 w-4"})," Ver detalhes"]}),e.jsxs(z,{children:[e.jsx(De,{className:"mr-2 h-4 w-4"})," Editar"]}),e.jsxs(z,{className:"text-red-600",children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"})," Excluir"]})]})]})})]},a.id))})]})}),e.jsx(V,{open:ae,onOpenChange:F,children:e.jsxs(P,{className:"sm:max-w-[500px]",children:[e.jsxs(R,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(K,{size:18,className:"text-emerald-500"}),e.jsx("span",{children:"Nova Receita"})]}),e.jsx($,{children:"Adicione uma nova receita ao condomínio."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-description",children:"Descrição"}),e.jsx(h,{id:"income-description",placeholder:"Ex: Pagamento taxa condominial",value:s.description,onChange:a=>b({...s,description:a.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-amount",children:"Valor (R$)"}),e.jsx(h,{id:"income-amount",type:"number",placeholder:"0,00",value:s.amount,onChange:a=>b({...s,amount:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-date",children:"Data"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"income-date",type:"date",value:s.date,onChange:a=>b({...s,date:a.target.value})}),e.jsx(L,{className:"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-category",children:"Categoria"}),e.jsxs(g,{value:s.category,onValueChange:a=>b({...s,category:a}),children:[e.jsx(j,{id:"income-category",children:e.jsx(f,{placeholder:"Selecione..."})}),e.jsx(v,{children:X.map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-account",children:"Conta"}),e.jsxs(g,{value:s.account,onValueChange:a=>b({...s,account:a}),children:[e.jsx(j,{id:"income-account",children:e.jsx(f,{placeholder:"Selecione..."})}),e.jsx(v,{children:N.map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-unit",children:"Unidade (opcional)"}),e.jsxs(g,{value:s.unit,onValueChange:a=>b({...s,unit:a}),children:[e.jsx(j,{id:"income-unit",children:e.jsx(f,{placeholder:"Selecione..."})}),e.jsxs(v,{children:[e.jsx(o,{value:"none",children:"Nenhuma"}),ie.map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-status",children:"Status"}),e.jsxs(g,{value:s.status,onValueChange:a=>b({...s,status:a}),children:[e.jsx(j,{id:"income-status",children:e.jsx(f,{placeholder:"Selecione..."})}),e.jsxs(v,{children:[e.jsx(o,{value:"completed",children:"Concluída"}),e.jsx(o,{value:"pending",children:"Pendente"})]})]})]})]})]}),e.jsxs(H,{children:[e.jsx(p,{variant:"outline",onClick:()=>F(!1),children:"Cancelar"}),e.jsx(p,{type:"submit",className:"bg-emerald-600 hover:bg-emerald-700",onClick:ce,children:"Adicionar Receita"})]})]})}),e.jsx(V,{open:se,onOpenChange:O,children:e.jsxs(P,{className:"sm:max-w-[500px]",children:[e.jsxs(R,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(Ee,{size:18,className:"text-red-500"}),e.jsx("span",{children:"Nova Despesa"})]}),e.jsx($,{children:"Adicione uma nova despesa ao condomínio."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expense-description",children:"Descrição"}),e.jsx(h,{id:"expense-description",placeholder:"Ex: Manutenção elevador",value:n.description,onChange:a=>C({...n,description:a.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expense-amount",children:"Valor (R$)"}),e.jsx(h,{id:"expense-amount",type:"number",placeholder:"0,00",value:n.amount,onChange:a=>C({...n,amount:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expense-date",children:"Data"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"expense-date",type:"date",value:n.date,onChange:a=>C({...n,date:a.target.value})}),e.jsx(L,{className:"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expense-category",children:"Categoria"}),e.jsxs(g,{value:n.category,onValueChange:a=>C({...n,category:a}),children:[e.jsx(j,{id:"expense-category",children:e.jsx(f,{placeholder:"Selecione..."})}),e.jsx(v,{children:Y.map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expense-account",children:"Conta"}),e.jsxs(g,{value:n.account,onValueChange:a=>C({...n,account:a}),children:[e.jsx(j,{id:"expense-account",children:e.jsx(f,{placeholder:"Selecione..."})}),e.jsx(v,{children:N.map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expense-payee",children:"Beneficiário (opcional)"}),e.jsx(h,{id:"expense-payee",placeholder:"Ex: Fornecedor XYZ",value:n.payee,onChange:a=>C({...n,payee:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expense-status",children:"Status"}),e.jsxs(g,{value:n.status,onValueChange:a=>C({...n,status:a}),children:[e.jsx(j,{id:"expense-status",children:e.jsx(f,{placeholder:"Selecione..."})}),e.jsxs(v,{children:[e.jsx(o,{value:"completed",children:"Concluída"}),e.jsx(o,{value:"pending",children:"Pendente"})]})]})]})]})]}),e.jsxs(H,{children:[e.jsx(p,{variant:"outline",onClick:()=>O(!1),children:"Cancelar"}),e.jsx(p,{type:"submit",className:"bg-red-600 hover:bg-red-700",onClick:oe,children:"Adicionar Despesa"})]})]})}),e.jsx(V,{open:ne,onOpenChange:B,children:e.jsxs(P,{className:"sm:max-w-[500px]",children:[e.jsxs(R,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(k,{size:18,className:"rotate-90 text-indigo-500"}),e.jsx("span",{children:"Nova Transferência"})]}),e.jsx($,{children:"Transfira valores entre contas do condomínio."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"transfer-description",children:"Descrição (opcional)"}),e.jsx(h,{id:"transfer-description",placeholder:"Ex: Transferência para fundo de reserva",value:t.description,onChange:a=>S({...t,description:a.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"transfer-amount",children:"Valor (R$)"}),e.jsx(h,{id:"transfer-amount",type:"number",placeholder:"0,00",value:t.amount,onChange:a=>S({...t,amount:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"transfer-date",children:"Data"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"transfer-date",type:"date",value:t.date,onChange:a=>S({...t,date:a.target.value})}),e.jsx(L,{className:"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"transfer-from",children:"Conta de Origem"}),e.jsxs(g,{value:t.fromAccount,onValueChange:a=>S({...t,fromAccount:a}),children:[e.jsx(j,{id:"transfer-from",children:e.jsx(f,{placeholder:"Selecione..."})}),e.jsx(v,{children:N.map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"transfer-to",children:"Conta de Destino"}),e.jsxs(g,{value:t.toAccount,onValueChange:a=>S({...t,toAccount:a}),children:[e.jsx(j,{id:"transfer-to",children:e.jsx(f,{placeholder:"Selecione..."})}),e.jsx(v,{children:N.filter(a=>a.id!==t.fromAccount||t.fromAccount==="none").map(a=>e.jsx(o,{value:a.id,children:a.name},a.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"transfer-status",children:"Status"}),e.jsxs(g,{value:t.status,onValueChange:a=>S({...t,status:a}),children:[e.jsx(j,{id:"transfer-status",children:e.jsx(f,{placeholder:"Selecione..."})}),e.jsxs(v,{children:[e.jsx(o,{value:"completed",children:"Concluída"}),e.jsx(o,{value:"pending",children:"Pendente"})]})]})]})]}),e.jsxs(H,{children:[e.jsx(p,{variant:"outline",onClick:()=>B(!1),children:"Cancelar"}),e.jsx(p,{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700",onClick:le,children:"Adicionar Transferência"})]})]})}),e.jsx("div",{className:"h-20"})]})}export{qe as default};
